5장 DDL 명령과 딕셔너리를 배웁니다.

DDL(DATA Definition Language): CREATE(생성), ALTER(수정), TRUNCATE(잘라내기), DROP(삭제)
DML(DATA Manipulation Language): INSERT(입력), Update(변경), DELETE(삭제), MERGE(병합)
DCL(DATA Control Language): GRANT(권한 주기), REVOKE(권한 뺏기)
TCL(Transaction Control Language): Commit(확정), Rollback(취소)
SELECT: 어떤 분류에서는 DQL (Data QUery Language)라고 하기도 한다.

오라클 데이터베이스 내부에 데이터를 관리하기 위해 다양한 저장 객체를 생성하게 되는데 이를 object(객체)라고 한다.

그리고 데이터를 저장하기 위해 별도의 저장공간을 가지는 것을 세그먼트(segment)라고 한다.


1. CREATE - 새로 생성
   새로운 오브젝트나 스키마를 생성할 때 사용하는 명령어
   
1.1 일반 테이블 생성하기

  명령어
  
  CREATE TABLE new_table
  ( no NUMBER(3),      // 최대 길이는 3자리 까지
    name VARCHAR2(10), // 최대 길이는 10바이트 까지
    birth DATE );      // 날짜만 들어갈 수 있다.
    
   -> 테이블 생성시 기본적으로 null 값이 들어간다.


1.2. 기본 입력 값을 설정하면서 생성하기


CREATE TABLE tt02
(no NUMBER(3,1) DEFAULT 0,
 name VARCHAR2(10) DEFAULT 'NO Name',
 hiredate DATE DEFAULT SYSDATE);
 
 -> 여기까지 레코드 값은 없다.
 
 
INSERT INTO TT02 (NO) VALUES(1);

-> NO 컬럼에만 1을 입력시 자동적으로 이름과, 날짜가 기입된다.



1.3 한글 이름으로 테이블 생성하기

CREATE TABLE 한글테이블 
( 컬럼1   NUMBER,
  컬럼2   VARCHAR2(10),
  컬럼3   DATE );
  
  

1.4 GLOBAL TEMPORARY TABLE(임시 테이블) 생성하기

데이터베이스에 저장할 목적이 아닌 임시 작업용 데이터를 저장하기 위해 만들어짐
이 테이블의 데이터는 영구적이지 않아서 임시로 사용되다가 사라진다. 사라지는 시점은 트랜잭션이 끝나거나 세션이 끝나는 지점이다.


문법:

CREATE GLOBAL TEMPORARY TABLE 테이블명
(컬럼1 데이터 타입
 컬럼2 데이터 타입
 ON COMMIT [DELETE | PRESERVE] ROWS;
 
 ON COMMIT DELETE ROWS: 커밋 시 데이터를 삭제
 ON COMMIT PRESERVE ROWS: 세션을 종료해야 데이터가 삭제
 
 
1.4.1 명령을 입력하는 터미널(창)을 2개 열어서 한쪽에서 생성 후 다른 쪽에서 조회 확인하기

세션 1
CREATE GLOBAL TEMPORARY TABLE temp01
(no   NUMBER,
 name VARCHAR2(10))
ON COMMIT DELETE ROWS;

INSERT INTO temp01 values(1, 'aaaa');


세션 2

select * from temp01;



커밋하면 이제 임시 테이블에 저장한 레코드가 없어진다.

세션 1

commit;

select * from temp01;




1.4.2 생성되어 있는 Temporary Table 조회하기

SELECT temporary, duration
from user_tables
where table_name='TEMP01';



1.5 테이블 복사하기(CTAS라고도 합니다)

이 방법은 새로운 테이블을 생성할 때, 기존에 만들어져 있는 테이블을 참조하여 생성한다. 즉 테이블을 복사하는 의미를 가지고 있다.



1.5.1 모든 컬럼 다 복사하기/ 특정 컬럼만 복사하기

CREATE TABLE dept3
AS 
SELECT * FROM dept2;



CREATE TABLE dept4
AS
SELECT DCODE, DNAME
FROM dept2;



