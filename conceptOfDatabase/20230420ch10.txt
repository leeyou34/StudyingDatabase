날짜: 20230420
작성자: leeyou34
공부 범주:
    가. chapter 10 회복과 병행 제어
    
요약:


가. chapter 10: 회복과 병행 제어
    
            10-01: 트랜젝션
                1. 트랜잭션의 개념: 작업 하나를 수행하는 데 필요한 데이터베이스의 연산들을 모아 놓은 것으로, 데이터베이스에서 논리적인 작업의 단위가 된다.
                                   트랜잭션은 데이터베이스에 장애가 발생했을 때 데이터를 복구하는 작업의 단위도 된다.
                                   
                
                2. 트랜잭션의 특성: 트랜잭션의 네 가지 특성은 ACID(원자성, 일관성, 격리성, 지속성)으로 구성되어있다.
                  2-1. 원자성: 트랜잭션을 구성하는 연산들이 모두 정상적으로 실행되거나 하나도 실행되지 않아야 한다는 all-or nothing 방식을 의미한다.
                  2-2. 일관성: 트랜잭션이 성공적으로 수행된 후에도 데이터베이스가 일관된 상태를 유지해야 함영속성이라고도하며트랜을 의미한다.
                  2-3. 격리성: 현재 수행 중인 트랜잭션이 완료될 때까지 트랜잭션이 생성한 중간 연산 결과에 다른 트랜잭션들이 접근 할 수 없음을 의미한다.
                  2-4. 지속성: 영속성이라고도 하며, 트랜잭션이 성공적으로 완료 된 후, 데이터베이스에 반영한 수행 결과는 어떠한 경우에도 손실되지 않고 영구적이어야 한다.
                  
                  2-5. 트랜잭션의 특성을 지원하는 DBMS의 기능
                       트랜잭션의 특성 |  DBMS의 기능
                       원자성         <- 회복 기능
                       일관성         <- 병행 제어 기능
                       격리성         <- 병행 제어 기능
                       지속성         <- 회복 기능
                  
                 3. 트랜잭션의 연산
                        트랜잭션의 수행과 관련하여 주로 사용되는 연산에는 작업 완료를 의미하는 commit 연산과 작업 취소를 의미하는 rollback 연산이 있다.
                        
                 
                 4. 트랜잭션의 상태
                 
                        트랜잭션 수행 시작
                        |
                        
                        활동
                        
                        |             ㄱ
                     부분 완료  ->    실패
                     
                        |              |
                       완료           철회
            
    
            10-02: 장애와 회복
                    
                   트랜잭션의 특성을 보장하고, 데이터베이스를 모순이 없는 일관된 상태로 유지하기 위해 데이터베이스 관리 시스템은 회복 기능을 제공한다.
                   
                   1. 장애의 유형
                       
                       
                      트랜잭션 장애
                        의미: 트랜잭션 수행 중 오류가 발생하여 정상적으로 수행을 계속할 수 없는 상태
                        원인: 트랜잭션의 논리적 오류, 잘못된 데이터 입력, 시스템 자원의 과다 사용 요구, 처리 대상 데이터의 부재 등
                      
                      시스템 장애
                        의미: 하드웨어의 결함으로 정상적으로 수행을 계속할 수 ㅇ벗는 상태
                        원인: 하드웨어 이상으로 메인 메모리에 저장된 정보가 손실되거나 교착 상태가 발생한 경우 등                    
                      
                      미디어 장애
                        의미: 디스크 장치의 결함으로 디스크에 저장된 데이터베이스의 일부 혹은 전체가 손상된 상태
                        원인: 디스크 헤드의 손상이나 고장 등
                        
                    2. 데이터베이스의 저장 연산
                    
                        저장 장치              설명
                        휘발성 저장 장치       의미       장애가 발생하면 저장된 데이터가 손실됨
                        (소멸성)                예        메인 메모리 등
                        
                        비 휘발성 저장 장치    의미       장애가 발생해도 저장된 데이터가 손실되지 않음. 
                        (비 소멸성)                       단, 디스크 헤더 손상 같은 저장 장치 자체에 이상이 발생하면 데이터가 손실 될 수 있음
                                                예        디스크, 자기 테이프, CD/DVD 등
                        
                        안정 저장 장치         의미        비휘발성 저장 장치를 이용해 데이터 복사본 여러 개를 만드는 방법으로,
                                                           어떤 장애가 발생해도 데이터가 손실되지 않고 데이터를 영구적으로 저장 할 수 있
                                        

                     3. 회복 기법
                        회복은 데이터베이스에 장애가 발생했을 때 장애가 발생하기 전의 모순이 없고 일관된 상태로 복구시키는 것으로, 데이터베이스 관리 시스템에 있는
                        회복 관리자(recovery manager)가 담당한다.

                        3-1. 회복을 위한 연산
                             데이터를 별도의 장소에 미리 복사해두고, 장애로 문제가 발생했을 때 복사본을 이용해 원래의 상태로 복원한다.
                             덤프: 데이터베이스 전체를 다른 저장 장치에 주기적으로 복사하는 방법
                             로그: 데이터베이스에서 변경 연산이 실행될 떄마다 데이털ㄹ 변경하기 이전 ㄱ밧과 변경한 이후의 값을 별도의 파일에 실행하는 방법
                             
                             재실행: 가장 최근에 저장한 데이터베이스 복사본을 가져온 후 로그를 이용해 복사본이 반들어진 이후에 실행된 모든 변경 연산을 재실행하여
                                     장애가 발생하기 직전의 데이터베이스 상태로 복구(전반적으로 손상된 경우에 주로 사용)
                                     
                             undo: 로그를 이용해 지금까지 실행된 모든 변경 연산을 취소하여 데이터베이스를 우너래의 상태로 복구
                             
                        
                        3-2. 로그 회복 기법
                             로그를 이용한 회복 기법은 데이터를 변경한 연산 결과를 데이터베이스에 반영하는 시점에 따라
                             즉시 갱신 회복 기법과 지연 갱신 회복 기법으로 나누니다.
                             
                             즉시 갱신 회복 기법: 
